# System Architecture & User Flow

## 📊 High-Level System Architecture

```
╔════════════════════════════════════════════════════════════════════════════╗
║                         POKER BOT SYSTEM ARCHITECTURE                      ║
╚════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────┐
│                              USER INTERFACE                             │
│  ┌──────────────┐  ┌──────────────┐  ┌─────────────────────────────┐  │
│  │   Terminal   │  │  Bot Think   │  │   Performance Report        │  │
│  │   (Main)     │  │  Terminal    │  │   (On Exit)                 │  │
│  │              │  │  (Separate)  │  │                             │  │
│  └──────┬───────┘  └──────┬───────┘  └─────────────┬───────────────┘  │
└─────────┼──────────────────┼────────────────────────┼──────────────────┘
          │                  │                        │
          ▼                  ▼                        ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           PRESENTATION LAYER                            │
│  ┌──────────────┐  ┌─────────────────┐  ┌────────────────────────┐   │
│  │   CLIView    │  │  BotThinking    │  │  PerformanceMonitor    │   │
│  │  (Display)   │  │  Visualizer     │  │   (Benchmarking)       │   │
│  └──────┬───────┘  └────────┬────────┘  └────────────────────────┘   │
│         │                   │                                          │
│  ┌──────┴────────────────────┴─────────────────┐                      │
│  │        ASCII Art Components                  │                      │
│  │  • Card Animation  • Table Display           │                      │
│  │  • Spinner         • Decision Trees          │                      │
│  └──────────────────────────────────────────────┘                      │
└─────────┬───────────────────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                          CONTROLLER LAYER                               │
│  ┌───────────────────────────────────────────────────────────────┐     │
│  │                    PokerController                            │     │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐   │     │
│  │  │  Game Loop   │  │  Betting     │  │   Showdown       │   │     │
│  │  │  Management  │  │  Handler     │  │   Resolution     │   │     │
│  │  └──────┬───────┘  └──────┬───────┘  └──────┬───────────┘   │     │
│  └─────────┼──────────────────┼──────────────────┼───────────────┘     │
└────────────┼──────────────────┼──────────────────┼─────────────────────┘
             │                  │                  │
             ▼                  ▼                  ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                            MODEL LAYER                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                 │
│  │   Player     │  │   BotPlayer  │  │     Deck     │                 │
│  │  (Base)      │  │  (AI Logic)  │  │   (Cards)    │                 │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘                 │
│         │                  │                  │                         │
│         └──────────┬───────┴──────────────────┘                         │
│                    │                                                    │
│  ┌─────────────────┴──────────────────────────────────────────┐        │
│  │              Game State & Logic                            │        │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │        │
│  │  │   Card       │  │  HandValue   │  │  GameStage   │    │        │
│  │  │   Deck       │  │  HandRank    │  │  Difficulty  │    │        │
│  │  └──────────────┘  └──────────────┘  └──────────────┘    │        │
│  └────────────────────────────────────────────────────────────┘        │
└─────────┬───────────────────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        ANALYSIS & DECISION LAYER                        │
│  ┌──────────────────────────────────────────────────────────────┐      │
│  │               AdvancedHandEvaluator                          │      │
│  │  • 9 Hand Ranks  • Kicker Analysis  • Comparison Logic      │      │
│  └──────────────────────────────────────────────────────────────┘      │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────┐      │
│  │             MonteCarloSimulator (Hard+ Bot)                  │      │
│  │  ┌───────────┐  ┌───────────┐  ┌────────────────────────┐   │      │
│  │  │ Parallel  │  │ Win Rate  │  │ Confidence Intervals   │   │      │
│  │  │ Execution │  │ Calculator│  │ Standard Deviation     │   │      │
│  │  │ (4 threads)│  └───────────┘  └────────────────────────┘   │      │
│  │  └───────────┘                                               │      │
│  └──────────────────────────────────────────────────────────────┘      │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────┐      │
│  │                    PokerMath Library                         │      │
│  │  • Kelly Criterion     • Expected Value                      │      │
│  │  • Pot Odds            • Sharpe Ratio                        │      │
│  │  • Risk of Ruin        • SPR Calculator                      │      │
│  └──────────────────────────────────────────────────────────────┘      │
└─────────┬───────────────────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         UTILITIES & LOGGING                             │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐     │
│  │  GameLogger      │  │ PerformanceMonitor│  │ BotThinkConfig  │     │
│  │  (CSV Output)    │  │  (Benchmarking)   │  │  (Log Routing)  │     │
│  └────────┬─────────┘  └────────┬──────────┘  └────────┬─────────┘     │
│           │                     │                       │               │
│           ▼                     ▼                       ▼               │
│  /tmp/poker_game_log.csv   Metrics Store    /tmp/poker_bot_thinking.log│
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🎮 User Flow Diagram

```
                              START
                                │
                                ▼
                    ┌───────────────────────┐
                    │   Initialize Systems  │
                    │  • GameLogger         │
                    │  • BotThinkConfig     │
                    │  • PerformanceMonitor │
                    └───────────┬───────────┘
                                │
                                ▼
                    ┌───────────────────────┐
                    │   Select Difficulty   │
                    │  1. Easy              │
                    │  2. Medium            │
                    │  3. Hard              │
                    │  4. Hard+ (Monte C.)  │
                    └───────────┬───────────┘
                                │
                                ▼
        ╔═══════════════════════════════════════════════╗
        ║           GAME ROUND START                    ║
        ╚═══════════════════════════════════════════════╝
                                │
                    ┌───────────▼───────────┐
                    │    Deal Cards         │
                    │    Pot: 200 chips     │
                    └───────────┬───────────┘
                                │
                ┌───────────────┴───────────────┐
                │                               │
                ▼                               ▼
    ┌──────────────────────┐        ┌──────────────────────┐
    │   Player Sees Hand   │        │   Bot Analyzes Hand  │
    │   (Terminal #1)      │        │   (Terminal #2)      │
    └──────────┬───────────┘        └──────────┬───────────┘
               │                               │
               │                               ▼
               │               ┌─────────────────────────────┐
               │               │  Bot Thinking Logs:         │
               │               │  • Monte Carlo Simulation   │
               │               │  • Kelly Criterion          │
               │               │  • Expected Value           │
               │               │  • Decision Reasoning       │
               │               └─────────────────────────────┘
               │
               ▼
    ╔═══════════════════════════════════════════════╗
    ║           BETTING ROUNDS                      ║
    ║  Flop → Turn → River → Showdown              ║
    ╚═══════════════════════════════════════════════╝
               │
               ▼
    ┌──────────────────────┐
    │   Determine Winner   │
    │   Update Chips       │
    └──────────┬───────────┘
               │
               ▼
    ┌──────────────────────┐
    │   Log to CSV         │
    │   Continue?          │
    └──────────┬───────────┘
               │
        ┌──────┴──────┐
        │             │
        ▼             ▼
    [New Round]   [EXIT & Report]
```

See full detailed flow in docs folder.

